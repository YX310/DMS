<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>新建项目</title>
	<link rel="stylesheet" th:href="@{/css/index.css}" />
	<link th:href="@{/css/select_input.css}" rel="stylesheet"/>
	<link rel="stylesheet" type="text/css" th:href="@{/css/jquery-tagsinput.min.css}" />
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.bootcss.com/bootstrap/4.1.0/css/bootstrap.min.css" rel="stylesheet">
	<script th:src="@{/js/jquery.js}"></script>
	<script th:src="@{/js/select_input.js}"></script>
	<script th:src="@{/js/jquery-1.11.0.min.js}"></script>
	<script th:src="@{/js/getTime.js}"></script>
	<script th:src="@{/js/jquery-tagsinput.js}"></script>
	<style type="text/css">
		body{font-size: 1.3em;}
		th,td{font-size: 1em;}
		a{text-decoration:none;color: inherit;}
	</style>
	</head>
	<body>
		<div id="toolbarBox" style="min-height: 60px;">
		<div id="toolbar-container">
			<div id="toolbar-container-left">
				<div id="toolbar-logo">DTS</div>
				<div class="toolbar-f1">
					<ul><a th:href="@{/toWorkbench(id=${session.userId})}">我的工作台</a></ul>
					<ul><a th:href="@{/homeProjectList}">我的项目</a></ul>
				</div>
			</div>
			<div id="toolbar-container-middle">
				<div class="search-box">
					<form class="search_form" method="post" onsubmit="return handleSearchSubmit()">
						<div id="search-input-box" autoHeight="true">
							<input type="text" id="input_text" placeholder="请输入搜索内容" autocomplete="off" onsubmit="return false">
							<ul class="search-ul">
							</ul>
						</div>
						<input type="submit" value="搜索" id="input_sub" class="input_sub">
					</form>
				</div>
			</div>
			<div id="toolbar-container-right">
				<div class="toolbar-user">
					<div class="headimg_box">
						<img src="../imgs/style_img/logimg.jpg"/>
					</div>
					<span><a th:if="${(session.userId)}!=null " th:text="${session.username}" class="usermsg" th:href="@{/toMe(id=${session.userId})}"></a></span>
				</div>
				<div class="toolbar-logout">
					<a href="/login">退出</a>
				</div>
			</div>
		</div>
	</div>
		<div  class="container" style="margin-top: 20px" >
			<form name="add-form" th:action="@{/addProject}" method="post">
				<input name="creator" type="hidden" th:value="${session.username}"/>
				<input name="user_id" type="hidden" th:value="${session.userId}"/>
				<input name="creation_date" type="hidden" id="time" value=""/>
				<h2 class="heading" >新建项目</h2>

				<!--系统成员不存在-->
				<div th:unless="${isNotSystemUser == null || isNotSystemUser.size() == 0}">
					<div th:each="n:${isNotSystemUser}">
						<span th:text="${n}"><span th:unless="${n == isNotSystemUser.get(isNotSystemUser.size() - 1)}">,</span></span>
					</div>
					<span>不存在</span>
				</div>

				<table class="table table-striped table-bordered table-hover table-condensed" border="0" cellspacing="0" width="80%" height="100%" >
					<tr>
						<td width="20%" align="center">标题</td>
						<td><input id="postinput" class="form-control" name="project_name" maxlength="30" required/></td>
					</tr>
					<tr>
						<td align="center">描述</td>
						<td >
							<textarea name="project_description" data-provide="markdown" rows="10" cols="140"></textarea>
						</td>
					</tr>

					<tr>
						<td align="center">添加成员</td>
						<td>
							<div class="htmleaf-container">

								<div class="container">
									<div class="row">
										<div  class="col-sm-12">
											<div class="form-group">
												<input data-role='tags-input' name="project_member" value="" required/>
											</div>
										</div>
									</div>
								</div>
							</div>
						</td>
					</tr>

				</table>
				<button class="btn btn-primary btn-lg btn-block" type="submit">创建</button>
			</form>
		</div>
		<script th:inline="javascript">
			/*<![CDATA[*/
			$(document).ready(function() {
				$('[data-role="tags-input"]').tagsInput();
			});
			function _confirm2(errorInfo) {
				console.log(errorInfo);
				if (errorInfo != null) {
					zeroModal.error({
						content: '创建失败',
						contentDetail: errorInfo,
						okFn: function() {},
						cancelFn: function() {}
					});
				}
			}
			_confirm2([[${errorInfo}]])
			/*]]>*/
		</script>
	</body>
</html>
